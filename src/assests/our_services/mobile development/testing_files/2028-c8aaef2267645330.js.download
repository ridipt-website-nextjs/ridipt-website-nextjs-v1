!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="c96be65f-51c6-4a73-ba5d-32caae45c8aa",e._sentryDebugIdIdentifier="sentry-dbid-c96be65f-51c6-4a73-ba5d-32caae45c8aa")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2028],{64979:function(e,o,t){t.d(o,{C0:function(){return w},H$:function(){return d},Iu:function(){return _},Kq:function(){return c},OI:function(){return i},PF:function(){return r},RJ:function(){return p},Zq:function(){return b},_R:function(){return h},cm:function(){return a},e5:function(){return u},os:function(){return l},p3:function(){return n},u4:function(){return f},vl:function(){return m},wK:function(){return s},wj:function(){return k},xQ:function(){return g}}),t(12976).p;let a="download_after_removing_bg",r="copy_after_removing_bg",n="edit_after_removing_bg",l="ai_tool_removebg",i="ai_tool_expand_carousel",_="ai_tool_expand_removebg",u="ai_tool_expand_download_popover",c="ai_tool_retouch_download_popover",s="ai_tool_reimagine_download_popover",d="ai_tool_upscaler",w="ai_tool_all",f="ai_tool_all_thumbnail",p="edit_tools_onboarding_v2",m="edit_tools_onboarding",g=["replacebg","video","generatePrompt","styleReference"],b=["tint","grain","presets"],h=2e3,k=15},42690:function(e,o,t){t.d(o,{I:function(){return m}});var a=t(65122),r=t(69762),n=t(43186),l=t(52983),i=t(33961),_=t(51986);let u=(e,o)=>{let t=c(e,o),a=s(e);if(!t)throw Error("There are no download parameters for ".concat(e.name," in ").concat(o));return{action:t,modifier:a}},c=(e,o)=>{var t;let a=null===(t=d[e.name])||void 0===t?void 0:t[o];if(!a)throw Error("There are no download parameters for ".concat(e.name," in ").concat(o));return a},s=e=>{if("workflow"===e.name){let o=w[e.subOption];if(!o)throw Error("There are no download parameters for workflow with ".concat(e.subOption));return o}},d={retouch:{detail:"ai_tool_retouch",postDownload:"ai_tool_retouch_after_download"},expand:{detail:"ai_tool_expand",postDownload:"ai_tool_expand_after_download"},reimagine:{detail:"ai_tool_reimagine",postDownload:"ai_tool_reimagine_after_download"},adjust:{detail:"ai_tool_adjust",postDownload:"ai_tool_adjust_after_download",thumbnail:"ai_tool_adjust_thumbnail"},replacebg:{detail:"ai_tool_replacebg"},video:{detail:"ai_tool_video",postDownload:"ai_tool_video_after_download"},assistant:{detail:"ai_tool_assistant",thumbnail:"ai_tool_assistant_thumbnail"},generatePrompt:{detail:"ai_tool_generate_prompt"},styleReference:{detail:"ai_tool_generate_style_ref"},workflow:{detail:"ai_tool_assistant"},imageEditor:{thumbnail:"ai_tool_all_thumbnail"}},w={createSocialPost:"workflow_create_post",createPoster:"workflow_create_poster",mixImages:"workflow_mix_images",applyPromo:"workflow_apply_promo",createFlyer:"workflow_create_flyer",createLogoVariations:"workflow_create_logo_variations",localize:"workflow_localize",createLogo:"workflow_create_logo",applyColors:"workflow_apply_colors",replaceText:"workflow_replace_text",removeText:"workflow_remove_text",replaceElement:"workflow_replace_element",addElement:"workflow_add_element"};var f=t(75045);let p=e=>{let{tool:o,location:t,imageSrc:a,resource:r}=e,{id:c,name:s,author:d,premium:w,type:p,isAIGenerated:m,preview:g,url:b}=r,{action:h,modifier:k}=u(o,t),v=(0,_.M)({tool:o,resource:{type:p,subtype:p,authorName:d.name,isPremium:w,isAIGenerated:m}}),{handleDownload:y}=(0,f.i)({resource:{id:c,name:s,author:d,premium:w,regularType:p,isAIGenerated:m,url:b,preview:g},action:h,modifier:k,showAttributionModal:!1,skipDownloadTracker:!0,location:(0,i.d)({isResourcePremium:w,tool:o,location:t}),checkoutQueryParams:v}),T=(0,n.J)(),I=null!=a?a:g.url;return(0,l.useCallback)(async()=>{let e=await y(I);if(!(null==e?void 0:e.signedUrl))throw Error("Failed to download image");return T(),"".concat(e.signedUrl,"&w=2000&h=2000")},[I,y,T])},m=e=>{let{tool:o,location:t,imageSrc:n,extraParams:l,resource:i}=e,{id:_,premium:u,isAIGenerated:c,type:s,author:{name:d},name:w,preview:{url:f,width:m,height:g}}=i,b=(0,a.e)(),h=p({tool:o,location:t,imageSrc:n,resource:i});return(0,r.F)({tool:o,resource:{id:_,name:w,type:s,authorName:d,isPremium:u,isAIGenerated:c,groupedType:"regular",media:{url:f,width:m,height:g}},canDownloadResource:b||!u,imageSrc:n,getSignedResource:h,location:t,extraParams:l})}},15715:function(e,o,t){t.d(o,{H:function(){return r}});let a=e=>{let{resource:o,file:t,option:a,size:r,action:n,walletId:l,locale:i,modifier:_}=e,u=new URLSearchParams;return u.set("resource","".concat(o)),t&&a?(u.set("file",t),u.set("option","".concat(a))):r&&u.set("size","".concat(r)),n&&u.set("action",n),l&&u.set("walletId",l),u.set("locale",i),_&&u.set("modifier",_),u.toString()},r=async e=>{let o=a(e),t=await fetch("/api/regular/download?".concat(o));return t.ok?{success:!0,data:await t.json()}:429===t.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===t.status||403===t.status||405===t.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===t.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},75045:function(e,o,t){t.d(o,{i:function(){return E}});var a=t(59445),r=t(15880),n=t(68147),l=t(85229),i=t(87420),_=t(59608),u=t(52983),c=t(9036),s=t(35576),d=t(7526);let w=(e,o)=>o||("photo"===e?"jpg":"zip");var f=t(49737);t(97458);let p=(0,u.createContext)(null),m=()=>(0,u.useContext)(p)||{shouldTrackingLog:!0};var g=t(15715),b=t(32509),h=t(59916),k=t(72118),v=t(1850),y=t(64979),T=t(56879);let I=v.z.enum(["download","copy","edit","prompt","preview","remove_background","remove_background_edit","ai_video",y.cm,y.PF,y.p3,y.Kq,y.wK,y.os,y.H$,y.C0,y.u4,y.OI,y.Iu,y.e5,"ai_tool_retouch","ai_tool_retouch_after_download","ai_tool_expand","ai_tool_expand_after_download","ai_tool_reimagine","ai_tool_reimagine_after_download","ai_tool_adjust","ai_tool_adjust_after_download","ai_tool_replacebg","ai_tool_video","ai_tool_video_after_download","ai_tool_assistant","ai_tool_generate_prompt","ai_tool_generate_style_ref","ai_tool_adjust_thumbnail","ai_tool_assistant_thumbnail","ai_tool_all_thumbnail"]),x=v.z.enum(["workflow_create_post","workflow_create_poster","workflow_mix_images","workflow_apply_promo","workflow_create_flyer","workflow_create_logo_variations","workflow_localize","workflow_create_logo","workflow_apply_colors","workflow_replace_text","workflow_remove_text","workflow_replace_element","workflow_add_element"]);v.z.object({resource:v.z.coerce.number(),file:T.ru.optional(),option:v.z.coerce.number().optional(),size:v.z.coerce.number().optional(),action:I.optional(),modifier:x.optional(),walletId:v.z.string().nullable().optional(),locale:v.z.string()}),v.z.object({data:v.z.object({filename:v.z.string(),url:v.z.string(),prompt:v.z.string().optional(),signed_url:v.z.string().optional()})}).transform(e=>{let{data:o}=e;return o}).transform(e=>{let{signed_url:o,...t}=e;return{...t,signedUrl:o}});let z=v.z.array(v.z.string()),D=new Date(new Date().getTime()+48e4),N=k.Z.withConverter({write:e=>e}),R=e=>{try{let o=N.get(e);if(!o)return[];return z.parse(JSON.parse(o))}catch(e){return[]}},O=()=>{let e=(0,n.I)(),o=(0,h.b)();return(0,u.useCallback)(t=>{if(!e)return;let a="".concat("ck_items_").concat(e),r=R(a),n="".concat(t);if(!r.includes(n)){let e=JSON.stringify([...r,n]);N.set(a,e,{path:"/",domain:o,expires:D})}},[e,o])},E=e=>{let{resource:o,file:t,action:p="download",modifier:h,location:k="resource_detail",option:v,size:y,showAttributionModal:T=!0,handleError:I,checkoutQueryParams:x,skipDownloadTracker:z=!1}=e,{id:D,name:N,author:R,premium:E,regularType:C,isAIGenerated:j,url:U}=o,[A,P]=(0,u.useState)(!1),{isUserWinback:H,showWinbackModal:L}=(0,l.l)(),{showAttribution:F}=(0,f.tc)(),K=O(),S=(0,b.b)({resource:o,location:k}),W=(0,s.mS)(),{shouldTrackingLog:J}=m(),{showDeviceBlockedModal:q,isDeviceBlocked:M}=(0,r.qx)(),G=(0,a.Lh)(),Z=(0,n.I)(),$=(0,i.ZK)(),Q=(0,c.TH)({file_extension:w(C,t),file_name:N,file_id:D,license:E?"premium":"free",resolution:y?d.w8[y]:"original",style:"na",author_name:R.name,category:j?"ai_image":C,action:"prompt"===p?"view_prompt":p,location:k,url_link:U}),V=(0,u.useCallback)(e=>{if(I){I(e);return}"prompt"!==p&&S(e,x)},[I,p,S,x]);return{handleDownload:(0,u.useCallback)(async(e,o)=>{if(M){q();return}if(H){L();return}P(!0),G||_.uT("WARNING: User ".concat(Z," has no wallet_id"),"warning"),J&&!z&&W({resourceId:D,isResourcePremium:E,resourceType:C,downloadType:p,fileType:C,variant:k});let a=await (0,g.H)({resource:D,size:y?2e3:void 0,action:p,modifier:h,file:t,option:v,walletId:G,locale:$});if(a.success)return T&&F&&F(),P(!1),K(D),Q({externalUrl:null!=e?e:U,setting:o}),a.data;V(a),P(!1)},[M,H,G,J,z,D,y,p,h,t,v,$,V,q,L,Z,W,E,C,k,T,F,K,Q,U]),isDownloading:A}}},32509:function(e,o,t){t.d(o,{b:function(){return i}});var a=t(17842),r=t(10893),n=t(52983),l=t(65724);let i=e=>{var o;let{location:t,resource:i}=null!=e?e:{},{t:_}=(0,r.$G)("error"),{openToast:u}=(0,a.x_)(),c=(0,l.W)(null!==(o=null==i?void 0:i.id)&&void 0!==o?o:0,"",t);return(0,n.useCallback)((e,o)=>{if("DOWNLOAD_LIMIT_REACHED"===e.data&&i){c({resourceData:{name:i.name,mediaUrl:i.preview.url,mediaWidth:i.preview.width,mediaHeight:i.preview.height,resourceType:"regular"},checkoutQueryParams:o,modalType:"downloadLimit",origin:"download_limit"});return}if("AUTHENTICATION_ERROR"===e.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===e.data&&u({type:"danger",message:_("notFound")}),"UNKNOWN_ERROR"===e.data&&u({type:"danger",message:_("unknown")})},[c,u,i,_])}},64237:function(e,o,t){t.d(o,{y:function(){return r}});var a=t(5704);let r=e=>{let{isEditableInMockup:o,isEditableInWepik:t}=e,r=(0,a.Jn)("type");return"illustration"===r?"illustration":o||"mockup"===r?"mockup":t||"template"===r?"template":void 0}}}]);